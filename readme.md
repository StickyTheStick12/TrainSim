## Introduction - Project Structure

The project is organized into two main directories: `attack` and `simulation`. The `simulation` directory is further divided into several subdirectories:

### Simulation Directory

#### 1. **TLS Subdirectory**
   - Contains TLS certificates and keys used for securing communication in Flask and Modbus.

#### 2. **Log Subdirectory**
   - Stores log files generated by the program, excluding Flask logs, which are placed inside `data.json`.

#### 3. **Static Subdirectory**
   - Holds CSS files used for styling.

#### 4. **Templates Subdirectory**
   - Contains HTML files utilized by the Flask application for rendering pages.

#### 5. **Script Subdirectory**
   - Houses all the necessary scripts required to run the simulation.

## Installation and Execution Guidelines

To run the program, start by installing the required dependencies. The simplest way is to use the provided requirements list and execute the following command:

```bash
pip install -r requirements.txt
```

Once the dependencies are installed, you can use the provided Makefile for convenient program execution. The Makefile supports three different start commands:

1. **Single Terminal (make start):**
    ```bash
    make start
    ```
   - This command runs all scripts in the same terminal.

2. **Gnome Terminals (make gnomestart):**
    ```bash
    make gnomestart
    ```
   - Spawns a new Gnome terminal for each script. Note: Gnome terminals are required for this option.

3. **Xterminals (make xstart):**
    ```bash
    make xstart
    ```
   - Spawns a new Xterminal for each script. Note: Xterminals are required for this option.

Choose the option that best fits your environment and preferences. 


## Architecture picture

## HMI Description

The project features two different HMIs:

### GUI Application

The GUI application is designed to provide information similar to what a user would observe at a train station. Key features include:
- **Departure Times:** Displays departure times for trains, at which track they depart and to where.
- **Switch Status:** Indicates the status of the switch.
- **Train Presence:** Shows if a train is currently at the station.
- **Track Status:** Provides track status information (not visible in a typical train station).
  
The GUI is read-only and does not allow data modification. It serves as a tool for viewing changes for unauthorized users.

### Web Application

The web application, listening on localhost at port 5001, allows authorized users to modify data. Login credentials are as follows:
- **Username:** root
- **Password:** password

Credentials are stored in `credentials.json`. To change the password, generate a new password using the bcrypt command:
```python
hash = bcrypt.hashpw(your_password.encode(), bcrypt.gensalt())
```
Set the generated hash in the password field.

#### Subpages

1. **Timetable Page:**
   - Default page allowing the creation and deletion of trains.
   - To delete a train, press the delete button and input the train ID shown on the webpage.
   - To create a train, select a track, departure time, and destination.
   - Arrival time is calculated by the simulation based on the provided departure time.
   - Departure time is treated as a wish; the simulation will attempt to find a close match.
   - Track selection is also a wish; the simulation will prefer the chosen track but may adjust based on availability.

2. **Railway Page:**
   - Displays the statuses of tracks (green for available, red for occupied).
   - Buttons are pressable, allowing users to change the status of a specific track.
   - Features a manual switch for selecting a track, which takes precedence over the simulation.

3. **Log Page:**
   - Contains logs of changes made in the Flask app, showing who made the changes and at what time.
   
These three subpages are accessible through the navigation bar.

